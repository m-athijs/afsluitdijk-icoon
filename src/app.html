<template>
  <h1>${message}</h1>
  <h4>${100 * audioBuffered.end(0) / audioDuration}% loaded</h4>
  <audio src="assets/audio1.mp3" controls preload buffered.from-view="audioBuffered" duration.from-view="audioDuration"></audio>
  <p>Loaded: <span></span>%</p>
  <p>Played: <span></span>%</p>
  <script type="text/javascript">
    alert(audio.duration);
      var audio = document.querySelector('audio');
      var percentages = document.querySelectorAll('span');
      
      function loop() {
        var buffered = audio.buffered;
        var loaded;
        var played;
      
        if (buffered.length) {
          loaded = 100 * buffered.end(0) / audio.duration;
          played = 100 * audio.currentTime / audio.duration;
          percentages[0].innerHTML = loaded.toFixed(2);
          percentages[1].innerHTML = played.toFixed(2);
        }
      
        setTimeout(loop, 50);
      }
      
      loop();
  </script>
</template>
